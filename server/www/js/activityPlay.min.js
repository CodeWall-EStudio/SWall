angular.module("ts.utils.constants",[]).constant("BACKEND_SERVER","localhost"==location.hostname?"http://localhost:8090":"").constant("EVENT_LOGIN","event.login").constant("EVENT_MODE_CHANGE","event.mode.change").constant("CMD_SHOW_LOGIN_PANEL","cmd.login.panel.show").constant("CMD_SHOW_ACTIVITY_PANEL","cmd.activity.panel.show");angular.module("ts.services.utils",[]).service("UtilsService",[function(){var a={object:{toUrlencodedString:function(a){return _.map(a,function(a,b){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&")}},cookie:{get:function(a){var k=document.cookie.split("; ");return _.reduce(k,function(a,b){var q=b.split("=");a[q[0]]=q[1];return a},{})[a]}},time:{timezoneOffset:(new Date).getTimezoneOffset(),dateToDatetimePickerValue:function(b,k){b||(b=new Date);b.setMinutes(b.getMinutes()-a.time.timezoneOffset);
k||(b.setSeconds(0),b.setMilliseconds(0));return b.toISOString().split(".")[0]},datetimePickerValueToTs:function(b){if(b){var k=3>b.split(":").length?":00.000Z":".000Z",k=Date.parse(b+k)+6E4*a.time.timezoneOffset;console.log(b,k,new Date(k));return k}return 0}}};return a}]);angular.module("ts.services.user",["ts.utils.constants","ts.services.utils"]).service("UserService",["$rootScope","$http","UtilsService","BACKEND_SERVER","EVENT_LOGIN",function(a,b,k,v,n){return{uid:function(){return k.cookie.get("uid")},hasLoggedIn:function(){var a=k.cookie.get("uid"),b=k.cookie.get("skey");return Boolean(a&&b)},nick:function(){var a=localStorage.login_result;return(a=a?JSON.parse(a):{})?a.nick:""},login:function(k,r,s,p){function l(b,c){console.log("[UserService] login result:",
b,c,document.cookie);200==c&&s?(localStorage.login_result=JSON.stringify(b),s(b,c)):p&&p(b,c);a.$emit(n,c,b)}b.put(v+"/users/"+k+"/login","pwd="+encodeURIComponent(r),{responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(l).error(l)},logout:function(){var a=(new Date).toGMTString();document.cookie="uin=; path=/; expires="+a;document.cookie="skey=; path=/; expires="+a;localStorage.removeItem("login_result")},fetchProfile:function(a){},activity:{isCreatorOfActivity:function(a){return k.cookie.get("uid")==
a.users.creator}}}}]);angular.module("ts.services.activity",["ts.utils.constants","ts.services.utils","ts.services.user"]).service("ActivityService",["$rootScope","$http","UtilsService","UserService","BACKEND_SERVER",function(a,b,k,v,n){function q(b){b?(a.selectedActivity=b,a.selectedActivityID=b._id):(a.selectedActivity=null,a.selectedActivityID="");console.log("[ActivityService] selected activity",a.selectedActivity)}function r(d,h,c,e){l();h=h||{};h._=(new Date).getTime();h=k.object.toUrlencodedString(h);b.put(n+"/activities/"+
d,h,{responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,b){if(e&&!e.c&&e.r)a:{var d=e.r;a.activityMap[d._id]=d;for(var h=0;h<a.activityList.length;++h)for(var x=a.activityList[h].activities,g=0;g<x.length;++g)if(x[g]._id==d._id){a.selectedActivity==x[g]&&(a.selectedActivity=d,a.selectedActivityID=d._id);x[g]=d;break a}}t();c&&c(e,b)}).error(function(a,b){t();e&&e(a,b)})}function s(b,h){a.activityList.splice(b,0,{date:p(h),activities:[h]})}function p(a){a=
new Date(a.info.date);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a.getTime().toString()}function l(){g.setAttribute("disabled","disabled")}function t(){g.removeAttribute("disabled")}function c(){a.hints="\u6ca1\u627e\u5230\u4efb\u4f55\u6d3b\u52a8"}var g=document.getElementById("activityDetailButtons");a.profiles={};a.activityList=[];a.activityMap={};a.selectedActivity=null;a.selectedActivityID="";a.hints="";return{selectActivity:q,selectActivityByID:function(b){q(a.activityMap[b])},
fetchActivities:function(d,h,g){a.activityList=[];a.activityMap={};a.hints="\u8bf7\u7a0d\u5019...";d=d||{};"manager"==a.mode()&&(d.creator=v.uid());d._=(new Date).getTime();console.log("[ActivityService] fetching activities with",d);b.get(n+"/activities",{responseType:"json",params:d}).success(function(e,b){if(200===b&&!e.c){a.profiles=e.r.profiles;var f=e.r.activities,d=_.groupBy(f,function(e){return p(e)});a.activityList=_.map(d,function(e,a){return{date:a,activities:e}});a.activityMap=_.reduce(f,
function(e,a){e[a._id]=a;return e},{});a.activityList.length?a.hints="":c();console.log("[ActivityService] activities result",a.activityList,a.activityMap)}h&&h(e,b)}).error(function(e,b){a.hints="\u62c9\u53d6\u6d3b\u52a8\u5931\u8d25";g&&g(e,b)})},getActivity:function(a,h,c){var e=(new Date).getTime();b.get(n+"/activities/"+a+"?_="+e,{responseType:"json"}).success(h).error(c)},createActivity:function(d,h,c){d=d||{};d._=(new Date).getTime();d=k.object.toUrlencodedString(d);b.post(n+"/activities",d,
{responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,b){if(e&&!e.c&&e.r){a.hints="";a:{var f=e.r[0];a.activityMap[f._id]=f;for(var d=p(f),c=0;c<a.activityList.length;++c){var g=a.activityList[c];if(g.date==d){g.activities.unshift(f);break a}else if(g.date>d){s(c,f);break a}}s(c,f)}}a.hints="";h&&h(e,b)}).error(c)},updateActivity:r,closeActivity:function(a,b,c){r(a,{status:"closed"},b,c)},deleteActivity:function(d,h,g){l();b({method:"DELETE",url:n+
"/activities/"+d+"?_="+(new Date).getTime()}).success(function(e,b){if(e&&!e.c)a:{q(),delete a.activityMap[d];for(var f=0;f<a.activityList.length;++f)for(var w=0;w<a.activityList[f].activities.length;++w)if(a.activityList[f].activities[w]._id==d){a.activityList[f].activities.splice(w,1);a.activityList[f].activities.length||a.activityList.splice(f,1);break a}}t();a.activityList.length||c();h&&h(e,b)}).error(function(a,b){t();g&&g(a,b)})},fetchActivityConfig:function(a,c){var g=(new Date).getTime();
b.get(n+"/activities/config?_="+g,null,{responseType:"json"}).success(function(e,b){console.log("[ActivityService] activity config =",e);a&&a(e,b)}).error(function(a,b){console.error("[ActivityService] FAIL TO FETCH ACTIVITY CONFIGURATIONS");c&&c(a,b)})},statistics:{byUser:function(a,b){var c=_.countBy(_.pluck(a.resources,"user")),c=_.map(c,function(a,b){return{uid:b,count:a}});return _.sortBy(c,function(a){return-a.count})},byTime:function(a,b){var c=_.first(a.resources);if(c){var e=c.date,m={};
b=1E3*(b||300);_.each(a.resources,function(a){var c=Math.floor((a.date-e)/b)*b;m[c]||(m[c]=[]);m[c].push(a)});return{beginning:e,items:m}}return{}}}}}]);angular.module("ap.controllers.main",["ts.services.activity","ts.services.user","ts.services.utils"]).controller("PlayerMainController",["$rootScope","$scope","$location","$sce","ActivityService","UserService","UtilsService",function(a,b,k,v,n,q,r){function s(a){var b=new XMLHttpRequest;b.addEventListener("load",function(){a&&a()});b.open("POST","/activities/"+d+"/participators");b.send()}function p(a,b,f,c){a="/activities/"+d+"/videos/"+a;var g=new XMLHttpRequest,h=new FormData;_.each(b,function(a,
b){h.append(b,a)});console.log("updating main videos",a,b);g.addEventListener("load",function(a){f&&f(g,a,JSON.parse(g.responseText))});g.addEventListener("error",function(a){c&&c(g,a)});g.open("PUT",a);g.send(h)}function l(){n.getActivity(d,function(e,m){console.log("[PlayerMainController] get activity success",m,e);if(200==m&&!e.c){a.profiles=e.profiles;a.activity=e.r;t(a.activity.resources);a.updateMainVideos(e.r.videos||[]);if(a.activity.active)a.userCount=a.activity.users.participators.length,
b.autoRefresh&&(h=setTimeout(function(){l()},5E3));else{var f=_.countBy(a.activity.resources,function(a){return a.user});a.userCount=_.keys(f).length}b.shouldShowUploadMainButton=q.activity.isCreatorOfActivity(a.activity)}},function(a,b){console.error("[PlayerMainController] get activity fail",b,a)});console.log("[PlayerMainController] getting info of activity "+d)}function t(b){var m=a.resources[0],f=m?m.resources[0].date:0;b=_.filter(b,function(a){return a.date>f});console.log("new resources",b);
for(m=0;m<b.length;++m){var c=b[m],d=new Date(c.date);d.setSeconds(0);d.setMilliseconds(0);d=d.getTime();a.resources[0]&&a.resources[0].ts==d?a.resources[0].resources.splice(0,0,c):a.resources.splice(0,0,{ts:d,resources:[c]});1!=c.type&&2!=c.type||a.presources.splice(0,0,c);-1==a.uploadedUsers.indexOf(c.user)&&a.uploadedUsers.push(c.user)}console.log("resources",a.resources);console.log("presources",a.presources)}function c(a){for(var b=_.map($(".resourceItem"),function(a){return parseInt(a.getAttribute("data-ts"))}).sort(),
f=0;f<b.length;++f)if(b[f]>=a)return b[f-1];return _.last(b)}function g(e,c,f){if(e){var d=parseInt(e.attr("data-gindex")),g=parseInt(e.attr("data-rindex"));c=e.parents(".resourceGroup").position();var h=e.position();c=c?c.top:0;var h=h?h.top:0,k=$("#timeline");console.log(k.scrollTop(),c,h);k.scrollTop(k.scrollTop()+c+h);f||a.$apply(function(){b.highlightSpecifyResource(null,d,g)});e.width(e.width()+1);setTimeout(function(){e.width("auto")},100)}}var d=k.search().aid,h=0,u=document.getElementById("player");
a.username=q.nick();a.userCount=0;a.uploadedUsers=[];a.rawResources=[];a.resources=[];a.presources=[];a.highlightResource={g:-1,r:-1};a.profiles={};a.selectedMainVideo=null;a.editingOrder=!1;a.editingTime=!1;a.mainVideos=[];b.selectedUser=null;b.selectedResource=null;b.selectedRIndex=-1;b.autoRefresh=!0;b.shouldShowUploadMainButton=!1;b.newCommentContent="";b.addingNewComment=!1;b.submitNewComment=function(){s(function(){if(!b.addingNewComment&&b.newCommentContent.length){b.addingNewComment=!0;var a=
new XMLHttpRequest,c=new FormData;c.append("type",0);c.append("content",b.newCommentContent);a.addEventListener("load",function(){switch(a.status){case 400:alert("\u8bf7\u6c42\u6709\u8bef\uff0c\u65e0\u6cd5\u6dfb\u52a0\u8bc4\u8bba");break;case 404:alert("\u60a8\u662f\u5426\u5df2\u7ecf\u52a0\u5165\u4e86\u5176\u4ed6\u6d3b\u52a8\uff1f\u8bf7\u5148\u5728\u624b\u673a\u7aef\u9000\u51fa\u5176\u4ed6\u6d3b\u52a8\u624d\u53ef\u4ee5\u53d1\u8868\u8bc4\u8bba\u54e6");break;case 500:alert("\u7f51\u7edc\u6216\u670d\u52a1\u5668\u51fa\u9519\u5566\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");
break;case 200:case 201:l()}b.addingNewComment=!1;b.newCommentContent="";$("#addCommentModal").modal("hide")});a.open("POST","/activities/"+d+"/resources");a.send(c)}})};a.updateMainVideos=function(b){a.mainVideos=_.map(b,function(a){a.url||(a.url=v.trustAsResourceUrl(a.src));return a});console.log("[MainVideos]",a.mainVideos)};b.$watch("selectedResource",function(a){a&&2==a.type&&setTimeout(function(){document.getElementById("videoPlayer").src=a.content},100)});a.uid2nick=function(b){return a.profiles[b]?
a.profiles[b].nick:b};a.timelineStartTime=function(){var b=_.last(a.resources);return(b=b?_.last(b.resources):void 0)?b.date:0};a.selectedMainVideoStartTime=function(){var b=a.timelineStartTime();a.selectedMainVideo&&(b+=1E3*a.selectedMainVideo.startTime);return b};a.selectedMainVideoStopTime=function(){return a.selectedMainVideo?a.selectedMainVideoStartTime()+1E3*a.selectedMainVideo.duration:0};b.selectMainVideo=function(b){u.pause();if(a.selectedMainVideo=b)b=new Date(a.selectedMainVideoStartTime()),
a.selectedMainVideoStartDate={y:b.getFullYear(),M:b.getMonth()+1,d:b.getDate(),h:b.getHours(),m:b.getMinutes(),s:b.getSeconds()}};b.editMainVideoName=function(a){var b=prompt("\u8bf7\u8f93\u5165\u201c"+a.name+"\u201d\u7684\u65b0\u540d\u79f0\uff1a");b&&(a.name=b,p(a._id,{name:b},function(a,b,e){console.log(a.status,e)},function(a,b){console.error(a.status,b)}))};b.removeMainVideo=function(b,c){if(confirm("\u786e\u5b9a\u5220\u9664\u4e3b\u89c6\u9891\u201c"+b.name+"\u201d?")){a.mainVideos.splice(c,1);
a.selectedMainVideo=a.mainVideos[0];a.editingOrder=void 0!=a.mainVideos[0];a.editingTime=!1;var f=new XMLHttpRequest;f.open("DELETE","/activities/"+d+"/videos/"+b._id);f.send()}};b.toggleVideoPlayer=function(){u.paused?u.play():u.pause()};b.enterEditOrderMode=function(e){(a.editingOrder=e)?u.pause():b.updateMainVideosOrder()};b.enterEditTimeMode=function(e,c){a.editingTime=e?!0:!1;e?a.selectedMainVideo=e:c&&b.updateMainVideoTiming()};b.updateMainVideosLocalOrder=function(b,c){var f=a.mainVideos.splice(b,
1)[0];a.mainVideos.splice(c?b-1:b+1,0,f)};b.updateMainVideosOrder=function(){p(a.mainVideos[0]._id,{orders:_.map(a.mainVideos,function(a){return a._id}).join(",")},function(a,b,c){console.log(a.status,c)},function(a,b){console.log(a.status,b)})};b.updateMainVideoTiming=function(){var b=a.timelineStartTime(),c=new Date(b),f=new Date;f.setFullYear(a.selectedMainVideoStartDate.y);f.setMonth(a.selectedMainVideoStartDate.M-1);f.setDate(a.selectedMainVideoStartDate.d);f.setHours(a.selectedMainVideoStartDate.h);
f.setMinutes(a.selectedMainVideoStartDate.m);f.setSeconds(a.selectedMainVideoStartDate.s);f.setMilliseconds(c.getMilliseconds());b=(f.getTime()-b)/1E3;0<=b?(a.selectedMainVideoStartDate={y:f.getFullYear(),M:f.getMonth()+1,d:f.getDate(),h:f.getHours(),m:f.getMinutes(),s:f.getSeconds()},a.selectedMainVideo.startTime=b,p(a.selectedMainVideo._id,{startTime:b},function(b,a,e){console.log(b.status,e)},function(b,a){console.error(b.status,a)})):(alert("\u4e3b\u89c6\u9891\u5f00\u59cb\u5f55\u5236\u65f6\u95f4\u5fc5\u987b\u665a\u4e8e\u65f6\u95f4\u8f74\u5f00\u59cb\u65f6\u95f4\uff01"),
f=new Date(a.selectedMainVideoStartTime()),a.selectedMainVideoStartDate={y:f.getFullYear(),M:f.getMonth()+1,d:f.getDate(),h:f.getHours(),m:f.getMinutes(),s:f.getSeconds()})};b.showResourceDetail=function(e,c,f){b.highlightSpecifyResource(e,c,f,!0);e.type&&!a.selectedMainVideo&&(b.selectedResource=e,b.selectedRIndex=a.presources.indexOf(e))};b.highlightSpecifyResource=function(b,c,f,d){console.log("highlighting resource",c,f);a.highlightResource={g:c,r:f};b&&(c=$(".resourceItem[data-ts="+b.date+"]"),
g(c,!0,!0));d&&a.selectedMainVideo&&b&&(b=b.date,d=a.selectedMainVideoStartTime(),c=d+a.selectedMainVideo.duration,console.log(b,d,c),b<d?b=d:b>c&&(b=c),u.currentTime=b-d,u.play())};b.hasPreviousPreviewableResource=function(){return 0<b.selectedRIndex};b.hasNextPreviewableResource=function(){return b.selectedRIndex<a.presources.length-1};b.selectPreviousPreviewableResource=function(){0<b.selectedRIndex&&(--b.selectedRIndex,b.selectedResource=a.presources[b.selectedRIndex])};b.selectNextPreviewableResource=
function(){b.selectedRIndex<a.presources.length-1&&(++b.selectedRIndex,b.selectedResource=a.presources[b.selectedRIndex])};b.filterByUser=function(a){b.selectedUser=a;$(".resourceGroup").css("display","none");setTimeout(function(){$(".resourceGroup").css("display","-webkit-box");b.$digest();refreshAllNextItemLineHeight()},0)};b.nextLineHeight=function(b,a){if(a){var c=$('.resourceItem[data-gindex="'+b+'"][data-rindex="'+a+'"]').outerHeight();return c?c-3:0}return 0};b.isFirstResourceInGroup=function(b,
a){if(0==a)return!0;var c=document.querySelector('.resourceItem[data-gindex="'+b+'"][data-rindex="'+a+'"]');if(c){var d=c.parentElement.querySelectorAll(".resourceItem:not(.ng-hide)")[0];return c==d}return!1};b.resourceShouldBeVisible=function(a){return!b.selectedUser||b.selectedUser==a.user};b.groupContainsResourceOfSelectedUser=function(a){return b.selectedUser?_.some(a.resources,function(a){return a.user==b.selectedUser}):!0};b.hideResourceDetail=function(){b.selectedResource=null;b.selectedRIndex=
-1};b.toggleAuthRefresh=function(){b.autoRefresh=!b.autoRefresh;b.autoRefresh?l():h&&(clearTimeout(h),h=0)};b.showUserStatistics=function(){b.stat=2;var c=n.statistics.byUser(a.activity,10),c=_.map(c,function(b){return[a.uid2nick(b.uid),b.count]});c.splice(0,0,["\u7528\u6237","\u8d44\u6e90\u6570"]);var d=google.visualization.arrayToDataTable(c),f={is3D:!0},g=new google.visualization.PieChart(document.getElementById("statBody"));setTimeout(function(){g.draw(d,f)},200)};b.showTimeStatistics=function(){b.stat=
1;var c=n.statistics.byTime(a.activity),d=c.beginning,c=_.map(c.items,function(b,a){var c=new Date(parseInt(a)+d);return[c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" "+c.getHours()+":"+c.getMinutes(),b.length]});c.splice(0,0,["\u65f6\u95f4","\u8d44\u6e90\u6570"]);var f=google.visualization.arrayToDataTable(c),g={hAxis:{title:"\u65f6\u95f4",titleTextStyle:{color:"red"}}},h=new google.visualization.ColumnChart(document.getElementById("statBody"));setTimeout(function(){h.draw(f,g)},200)};window.rs=
a;window.utils=r;l();(function(){var b=document.querySelector("video");b.addEventListener("timeupdate",function(d){d=a.selectedMainVideoStartTime()+1E3*b.currentTime;d=c(d);d=$(".resourceItem[data-ts="+d+"]");g(d,!0)})})()}]);document.domain="71xiaoxue.com";
angular.module("ap.controllers.videoUploader",["ts.services.activity","ts.services.user"]).controller("MainVideoUploaderController",["$rootScope","$scope","$location","ActivityService","UserService","UtilsService",function(a,b,k,v,n,q){function r(){b.$apply(function(){l();$("#uploadMainVideoModal").modal("hide")})}function s(){if(b.videoFile&&b.videoDuration&&b.videoName){var a=new FormData,g=new XMLHttpRequest;a.append("skey",q.cookie.get("skey"));a.append("file",b.videoFile);a.append("name",b.videoName);
a.append("media",1);a.append("activityId",k.search().aid);g.upload.addEventListener("progress",function(a){b.$apply(function(){b.videoUploadProgress=Math.floor(100*(a.loaded/a.total))})},!1);g.addEventListener("load",function(a){b.videoIsUploading=!1;console.log(g.status,g.responseText);try{var c=JSON.parse(g.responseText).data.fid;p(c)}catch(k){}b.$digest()},!1);g.addEventListener("error",function(b){console.log("[uploader] upload video error",b);r();alert("\u4e3b\u89c6\u9891\u4e0a\u4f20\u5931\u8d25\uff01")},
!1);b.videoIsUploading=!0;b.videoUploadProgress=0;g.withCredentials=!0;g.open("POST","http://szone.71xiaoxue.com/upload");g.send(a);console.log("[uploader] uploading video ...")}}function p(c){b.videoIsUploading=!1;console.log("\u4e0a\u4f20\u89c6\u9891\u7ed3\u679c\uff1a",c);if(c)if(b.videoName){b.videoURL="http://szone.71xiaoxue.com/api/media/download?fileId="+c;c=k.search().aid;var g=new FormData,d=new XMLHttpRequest;g.append("src",b.videoURL);g.append("name",b.videoName);g.append("duration",b.videoDuration);
d.addEventListener("load",function(c){b.videoIsAdding=!1;if(201==d.status){var g=(c=JSON.parse(d.responseText))?c.c:-1,e=c?c.r:null;console.log("[uploader] add success",c);!g&&e&&($("#uploadMainVideoModal").modal("hide"),a.updateMainVideos(e.videos))}else alert("\u6dfb\u52a0\u4e3b\u89c6\u9891\u5931\u8d25 ("+d.status+")");a.$digest()});d.addEventListener("error",function(a){console.log("[uploader] add video error",a);b.$apply(function(){l()})});b.videoIsAdding=!0;d.open("POST","/activities/"+c+"/videos");
d.send(g);console.log("[uploader] adding video to activity",c)}else alert("\u4e0a\u4f20\u89c6\u9891\u5931\u8d25\uff0c\u8bf7\u8f93\u5165\u6709\u6548\u7684\u89c6\u9891\u540d\u5b57");else alert("\u4e0a\u4f20\u89c6\u9891\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}function l(){$("#mainVideoFile").val(null);b.videoFile=null;b.videoName=null;b.videoDuration=0;b.videoIsReading=!1;b.videoIsUploading=!1;b.videoIsAdding=!1;b.videoUploadProgress=0;b.videoURL=null}var t=document.getElementById("mainVideoFile");
b.skey=q.cookie.get("skey");l();b.onSelectedFile=function(){b.$apply(function(){var a=t.files,a=a?a[0]:null;console.log("[uploader] selected file",a);if(a&&"video"==a.type.split("/")[0]){b.videoFile=a;var g=document.createElement("video"),a=window.URL.createObjectURL(a);g.addEventListener("loadedmetadata",function(){b.$apply(function(){b.videoIsReading=!1;b.videoDuration=g.duration;console.log("[uploader] video duration = "+g.duration)})});g.src=a;b.videoIsReading=!0;console.log("[uploader] reading video file ...")}else alert("\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6240\u9009\u62e9\u7684\u6587\u4ef6\u683c\u5f0f\u4e0d\u652f\u6301 "),
b.videoFile=null,b.videoDuration=0})};b.startUpload=function(){s()};b.cancelUpload=function(){(!b.videoIsUploading&&!b.videoIsUploading||confirm("\u786e\u5b9a\u8981\u53d6\u6d88\u4e0a\u4f20\u4e3b\u89c6\u9891\uff1f"))&&r()};b.submitLabel=function(){return b.videoIsReading?"\u8bf7\u7a0d\u5019":b.videoIsUploading?"\u4e0a\u4f20\u4e2d ("+(b.videoUploadProgress||0)+"%)":b.videoIsAdding?"\u6dfb\u52a0\u4e2d":"\u6dfb\u52a0"};window.addVideoToActivity=p;window.$scope=b}]);(function(){angular.module("activityPlay",["ts.services.user","ts.services.activity","ap.controllers.main","ap.controllers.videoUploader"])})();
